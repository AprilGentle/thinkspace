---
layout: post
title: "搭建技术博客"
comments: true
description: "搭建技术博客"
keywords: "blog, 博客, github, jykell"
---
{:.no_toc}
* A markdown unordered list which will be replaced with the ToC, excluding the "Contents header" from above
{:toc}

# 概述
本文介绍了从选型到实施,最终使用jykell搭建技术博客的过程,最后你能得到像我这样的技术博客。

---

# 选型
现在写博客主要有两种方式:
1. 使用博客服务商提供的网站写博客, 如csdn、博客园、简书、掘金
2. 个人建站,如月光博客

博客服务提供商中推荐使用简书，写作可以使用markdown，对移动端适配好。且seo和互动体验好
个人建站可使用自建vps，该方式需要维护vps、域名、数据库等基础设施，维护的工作量大，不能很好的专注于写作。本博客采用github+jekyll的形式，避免维护服务器的情况下，提供一定程度的自定义。[[^1]][[^2]]

以下介绍以ruby新手从零开始搭建博客,并提供本地测试环境。

**操作系统**: macOs Mojave 10.14.1
<div class="divider"></div>

# 使用jekyll在本地写博客
## ruby环境配置
由于mac brew安装的gem安装jekyll时需要root权限，我们使用rvm来配置环境。

1.安装rvm[[^3]]

``` bash
gpg2 --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB
\curl -sSL https://get.rvm.io | bash -s stable
```

2.使用rvm安装ruby

目标ruby版本为2.3, 由于mac新版本卸载了openssl，故安装ruby时需要指定openssl所在的位置。[[^4]]
``` bash
rvm reinstall 2.3 --with-openssl-dir=`brew --prefix openssl`
```

## jekyll使用说明

跟随jekyll官方网站:<https://jekyllrb.com/docs/step-by-step/01-setup> 的教程，你将学习到jekyll的使用方法及如何搭建博客。简要的命令如下:

**安装jekyll**
``` bash
gem install bundle jekyll
```

**启动jekyll**
``` bash
jekyll serve
```

## 本地写博客
### 选用主题
选用jekyll主题,可在[jekyllthemes](http://jekyllthemes.org/)上选择模块，本文选择的是[thinkspace](https://github.com/heiswayi/thinkspace)。由于后续要推送到自己的github仓库，这里先fork到自己的github仓库中。

将主题clone到本地
```bash
git clone https://github.com/AprilGentle/thinkspace.git thinkspace
```

进入主题并编译
```bash
cd thinkspace
bundle install
bundle exec jekyll serve
```

效果如下图

![avatar](/assets/images/blog/jekyll_serve.png)

访问<127.0.0.1:4000>后,见到下图则说明启动成功

![avatar](/assets/images/blog/thinkspace_start_step1.png)

### 自定义
a.**修改博客介绍**

1.修改_config.yml文件中的title_left为你自己的博客名

2.修改intro.html中的介绍

b.**写博客**

在_posts下新建文件，每个文件为一篇文章。文件名的格式为*YYYY-mm-dd-{文章名}**，文章内容用markdown格式去写。

新建名字为`2019-02-13-Hello-World`的文件名，文件名内容为:

```markdown
---
layout: post
title: "Hello"
comments: true
description: "搭建技术博客"
keywords: "demo"
---

**Hello** World
```

其中layout是jekyll预定义的[全局变量](https://jekyllrb.com/docs/front-matter/#predefined-global-variables)，表示布局，对应的位置为_layouts/post.html。其他变量分别为page.title,page.comments等，在post.html等文件中使用

接着打开<http://localhost:4000/>会看到新上传的文章

![avatar](/assets/images/blog/thinkspace_start_step2.png)

打开后看到内容:

![avatar](/assets/images/blog/thinkspace_start_step3.png)

<div class="divider"></div>

你可以尝试自己修改博客的内容，然后保存并重新刷新页面即可看到变化。

# 使用github+gitee page服务部署本地的jekyll博客

1.将本地的修改推送到远程仓库,推送的分支为gh-pages

2.在github项目中的setting选项中开启github Pages服务

![avatar](/assets/images/blog/github-pages.png)

接着就可以在github中看到我们的博客了，比如<https://aprilgentle.github.io/thinkspace/>

3.gitee配置pages

3.1 导入github项目

在创建中找到导入项目，选择github，按照教程导入对应的仓库 
![avatar](/assets/images/blog/gitee-pages-step1.png)

3.2 开启pages服务

在项目的service中找到gitee pages，开启pages服务，启动后访问<http://json.chen.gitee.io/thinkspace/>即可看到博客
![avatar](/assets/images/blog/gitee-pages-step2.png)

4.同步推送github和gitee

由于gitee不支持实时同步github的项目，该需求可同步在git客户端配置多个推送源，实现同步效果。

```bash
git remote set-url --add --push origin git@gitee.com:json.chen/thinkspace.git
git remote set-url --add --push origin git@github.com:AprilGentle/thinkspace.git
```

现在使用`git push`会推送到两个源

---
Footnote:

[^1]: 1: [如何开始写技术博客，怎么选择？](https://www.zhihu.com/question/24629410)  

[^2]: 2: [Jekyll + Github = 简单搭建一个个人博客](https://my.oschina.net/u/3729927/blog/1930704)

[^3]: 3: [https://rvm.io/](https://rvm.io/)

[^4]: 4: [Unable to require openssl, install OpenSSL and rebuild ruby (preferred) or use non-HTTPS sources](https://stackoverflow.com/questions/37336573/unable-to-require-openssl-install-openssl-and-rebuild-ruby-preferred-or-use-n)